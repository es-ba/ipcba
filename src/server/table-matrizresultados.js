"use strict";

module.exports = function(context){
    return context.be.tableDefAdapt({
        name:'matrizresultados',
        editable:false,
        dbOrigin:'view',
        fields:[
            {name:'periodo'                      ,typeName:'text'   }, 
            {name:'producto'                     ,typeName:'text'   }, 
            //{name:'tipoinformante'               ,typeName:'text'   },
            {name:'informante'                   ,typeName:'integer'},
            {name:'observacion'                  ,typeName:'integer'},
            {name:'promobs_1'                    ,typeName:'decimal'},
            {name:'precioobservado_1'            ,typeName:'decimal'},
            {name:'impobs_1'                     ,typeName:'text'   },
            {name:'antiguedadexcluido_1'         ,typeName:'integer'},
            {name:'antiguedadsinprecio_1'        ,typeName:'integer'},
            {name:'antiguedadconprecio_1'        ,typeName:'integer'},
            {name:'variacion_1'                  ,typeName:'decimal'},
            {name:'tipoprecio_1'                 ,typeName:'text'   },
            {name:'razon_1'                      ,typeName:'integer'},
            {name:'promobs_2'                    ,typeName:'decimal'},
            {name:'precioobservado_2'            ,typeName:'decimal'},
            {name:'impobs_2'                     ,typeName:'text'   },
            {name:'antiguedadexcluido_2'         ,typeName:'integer'},
            {name:'antiguedadsinprecio_2'        ,typeName:'integer'},
            {name:'antiguedadconprecio_2'        ,typeName:'integer'},
            {name:'variacion_2'                  ,typeName:'decimal'},
            {name:'tipoprecio_2'                 ,typeName:'text'   },
            {name:'razon_2'                      ,typeName:'integer'},
            {name:'promobs_3'                    ,typeName:'decimal'},
            {name:'precioobservado_3'            ,typeName:'decimal'},
            {name:'impobs_3'                     ,typeName:'text'   },
            {name:'antiguedadexcluido_3'         ,typeName:'integer'},
            {name:'antiguedadsinprecio_3'        ,typeName:'integer'},
            {name:'antiguedadconprecio_3'        ,typeName:'integer'},
            {name:'variacion_3'                  ,typeName:'decimal'},
            {name:'tipoprecio_3'                 ,typeName:'text'   },
            {name:'razon_3'                      ,typeName:'integer'},
            {name:'promobs_4'                    ,typeName:'decimal'},
            {name:'precioobservado_4'            ,typeName:'decimal'},
            {name:'impobs_4'                     ,typeName:'text'   },
            {name:'antiguedadexcluido_4'         ,typeName:'integer'},
            {name:'antiguedadsinprecio_4'        ,typeName:'integer'},
            {name:'antiguedadconprecio_4'        ,typeName:'integer'},
            {name:'variacion_4'                  ,typeName:'decimal'},
            {name:'tipoprecio_4'                 ,typeName:'text'   },
            {name:'razon_4'                      ,typeName:'integer'},
            {name:'promobs_5'                    ,typeName:'decimal'},
            {name:'precioobservado_5'            ,typeName:'decimal'},
            {name:'impobs_5'                     ,typeName:'text'   },
            {name:'antiguedadexcluido_5'         ,typeName:'integer'},
            {name:'antiguedadsinprecio_5'        ,typeName:'integer'},
            {name:'antiguedadconprecio_5'        ,typeName:'integer'},
            {name:'variacion_5'                  ,typeName:'decimal'},
            {name:'tipoprecio_5'                 ,typeName:'text'   },
            {name:'razon_5'                      ,typeName:'integer'},
            {name:'promobs_6'                    ,typeName:'decimal'},
            {name:'precioobservado_6'            ,typeName:'decimal'},
            {name:'impobs_6'                     ,typeName:'text'   },
            {name:'antiguedadexcluido_6'         ,typeName:'integer'},
            {name:'antiguedadsinprecio_6'        ,typeName:'integer'},
            {name:'antiguedadconprecio_6'        ,typeName:'integer'},
            {name:'variacion_6'                  ,typeName:'decimal'},
            {name:'tipoprecio_6'                 ,typeName:'text'   },
            {name:'razon_6'                      ,typeName:'integer'},
            {name:'atributo_1'                   ,typeName:'text'   },
            {name:'atributo_2'                   ,typeName:'text'   },
            {name:'atributo_3'                   ,typeName:'text'   },
            {name:'atributo_4'                   ,typeName:'text'   },
            {name:'atributo_5'                   ,typeName:'text'   },
            {name:'atributo_6'                   ,typeName:'text'   },
            {name:'periodo6'                     ,typeName:'text'   , allow:{select:false}}, 
        ],
        primaryKey:['periodo','producto','informante','observacion'],
        foreignKeys:[
            {references:'productos'  , fields:['producto']},
            {references:'informantes', fields:['informante']},
        ],
        sql:{
            isTable:false,
        }        
    },context);
}